[
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "ä¸»æœº CPU iowait è¿‡é«˜",
    "note": "èŠ‚ç‚¹ {{$labels.nodename}} è´Ÿè½½å¼‚å¸¸\n\n**ğŸ›‘ å½“å‰çŠ¶æ€**  \nâ–¸ æŒ‡æ ‡å€¼ï¼š{{$value | printf \"%.2f\"}}% ï¼ˆé˜ˆå€¼ >10%ï¼‰  \nâ–¸ å½±å“èŠ‚ç‚¹ï¼š{{$labels.nodename}} ({{$labels.instance}})  \nâ–¸ æ£€æµ‹çª—å£ï¼š5åˆ†é’Ÿæ»‘åŠ¨å¹³å‡å€¼  \n\n**ğŸ” æ ¹å› åˆ†æ**  \nâœ“ ç£ç›˜æ€§èƒ½ç“¶é¢ˆï¼ˆHDD/ç½‘ç»œå­˜å‚¨ååä¸è¶³ï¼‰  \nâœ“ å¼‚å¸¸è¿›ç¨‹æŒç»­å†™å…¥ï¼ˆå®¹å™¨æ—¥å¿—/æ•°æ®åº“äº‹åŠ¡ï¼‰  \nâœ“ å­˜å‚¨è®¾å¤‡æ•…éšœï¼ˆSSDå¯¿å‘½è€—å°½/RAIDå¼‚å¸¸ï¼‰  \n\n**ğŸš€ åº”æ€¥æ“ä½œ**  \n```bash\n# æŸ¥çœ‹å®æ—¶ç£ç›˜IOï¼ˆå…³æ³¨%util >80%ä¸ºå¼‚å¸¸ï¼‰\niostat -x 1\n\n# å®šä½é«˜IOè¿›ç¨‹ï¼ˆæŒ‰IOæ’åºï¼‰\niotop -oP | head -n 5\n\n# æ£€æŸ¥å­˜å‚¨å¥åº·ï¼ˆæœºæ¢°ç›˜/SSDï¼‰\nsmartctl -H /dev/sdX",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "(avg by (instance) (rate(node_cpu_seconds_total{mode=\"iowait\"}[5m])) * 100 > 10) * on(instance) group_left (nodename) node_uname_info{nodename=~\".+\"}",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Host"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "ä¸»æœº CPU è´Ÿè½½è¿‡é«˜",
    "note": "{{$labels.instance}} ä¸»æœº CPU è´Ÿè½½è¿‡é«˜\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯** \nâ–¸ ç›®æ ‡ä¸»æœºï¼š`{{$labels.instance}}`  \nâ–¸ ä¸»æœºåç§°ï¼š`{{$labels.nodename}}`  \nâ–¸ å½“å‰ CPU è´Ÿè½½ç‡ï¼š{{ printf \"%.1f\" $value }}ï¼ˆéç©ºé—² CPU ç™¾åˆ†æ¯”ï¼‰  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šCPU éç©ºé—²æ—¶é—´å æ¯”è¶…è¿‡ 80%\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ CPU æŒç»­é«˜è´Ÿè½½ï¼Œå¯èƒ½å¯¼è‡´ç³»ç»Ÿå“åº”å˜æ…¢  \nâœ“ ä¸šåŠ¡æ€§èƒ½å¯èƒ½å—åˆ°å½±å“ï¼Œç”šè‡³è§¦å‘æœåŠ¡å¼‚å¸¸  \nâœ“ å»ºè®®æ’æŸ¥å ç”¨é«˜çš„è¿›ç¨‹ï¼Œä¼˜åŒ–ä¸šåŠ¡æˆ–å¢åŠ è®¡ç®—èµ„æº\n\nè¯·å…³æ³¨ä¸»æœº CPU ä½¿ç”¨æƒ…å†µï¼Œé˜²æ­¢å›  CPU èµ„æºç“¶é¢ˆå¯¼è‡´ä¸šåŠ¡ä¸­æ–­",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 300,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "(sum by (instance) (avg by (mode, instance) (rate(node_cpu_seconds_total{mode!=\"idle\"}[2m]))) > 0.8) * on(instance) group_left (nodename) node_uname_info{nodename=~\".+\"}",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Host"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "ä¸»æœº inode ç©ºé—´ä¸è¶³",
    "note": "{{$labels.instance}} ä¸Šæ–‡ä»¶ç³»ç»Ÿ `{{$labels.mountpoint}}` å‰©ä½™ inode ä½äº 10%\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**\nâ–¸ ç›®æ ‡ä¸»æœºï¼š`{{$labels.instance}}`  \nâ–¸ ä¸»æœºåç§°ï¼š`{{$labels.nodename}}`  \nâ–¸ æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç‚¹ï¼š`{{$labels.mountpoint}}`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šå‰©ä½™ inode ç™¾åˆ†æ¯”ä½äº 10%ï¼Œä¸”æ–‡ä»¶ç³»ç»Ÿéåªè¯»  \n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ æ–‡ä»¶ç³»ç»Ÿ inode å³å°†è€—å°½ï¼Œå¯èƒ½å¯¼è‡´æ–°æ–‡ä»¶æ— æ³•åˆ›å»º  \nâœ“ ä¸šåŠ¡å†™æ“ä½œå¯èƒ½å¤±è´¥ï¼Œå‡ºç°ç£ç›˜å†™å…¥å¼‚å¸¸  \nâœ“ éœ€å°½å¿«æ¸…ç†æ— ç”¨æ–‡ä»¶æˆ–æ‰©å®¹å¯¹åº”åˆ†åŒº  \n\nè¯·é‡ç‚¹æ£€æŸ¥ä¸»æœº `{{$labels.instance}}` ä¸ŠæŒ‚è½½ç‚¹ `{{$labels.mountpoint}}` çš„æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨æƒ…å†µï¼Œæ’æŸ¥å¼‚å¸¸æ–‡ä»¶æˆ–è°ƒæ•´ç³»ç»Ÿé…ç½®",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 300,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "(node_filesystem_files_free{fstype!=\"msdosfs\",device!~\"nsfs|tmpfs\"} / node_filesystem_files{fstype!=\"msdosfs\",device!~\"nsfs|tmpfs\"} * 100 < 10 and ON (instance, device, mountpoint) node_filesystem_readonly == 0) * on(instance) group_left (nodename) node_uname_info{nodename=~\".+\"}",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Host"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 300s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "ä¸»æœºCPUå¯ç”¨ç‡ä¸è¶³20%",
    "note": "{{$labels.instance}} ä¸»æœº CPU å¯ç”¨ç‡ä¸è¶³\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ èŠ‚ç‚¹å®ä¾‹ï¼š`{{$labels.instance}}`  \nâ–¸ å½“å‰ CPU å¯ç”¨ç‡ï¼š`{{$value}}%`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼š5 åˆ†é’Ÿå†…å¹³å‡ CPU å¯ç”¨ç‡ < 20%\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ è¡¨æ˜ä¸»æœºå¤„äºé«˜è´Ÿè½½çŠ¶æ€  \nâœ“ æŒç»­ç©ºé—²ç‡è¿‡ä½å¯èƒ½å¯¼è‡´æœåŠ¡å“åº”å˜æ…¢ã€è°ƒåº¦å¤±è´¥ç­‰é—®é¢˜  \nâœ“ å¯èƒ½ç”±èµ„æºè¶…å–ã€æ¶æ„è¿›ç¨‹ã€è´Ÿè½½é£™å‡ç­‰åŸå› å¼•èµ·  \n\nè¯·åŠæ—¶æ’æŸ¥è¯¥èŠ‚ç‚¹ä¸Šè¿è¡Œçš„é«˜è´Ÿè½½è¿›ç¨‹æˆ–èµ„æºäº‰ç”¨æƒ…å†µã€‚",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 30,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "avg(irate(node_cpu_seconds_total{mode=\"idle\"}[5m])) by (instance) * 100 <= 20",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Host"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 30s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "ä¸»æœºäº¤æ¢åˆ†åŒºä½¿ç”¨ç‡è¿‡é«˜",
    "note": "{{$labels.instance}} Swap ä½¿ç”¨ç‡è¿‡é«˜\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**\nâ–¸ ç›®æ ‡ä¸»æœºï¼š`{{$labels.instance}}`  \nâ–¸ ä¸»æœºåç§°ï¼š`{{$labels.nodename}}`  \nâ–¸ å½“å‰ Swap ä½¿ç”¨ç‡ï¼š{{ printf \"%.1f\" $value }}%  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šSwap ä½¿ç”¨ç‡è¶…è¿‡ 80%\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ é«˜ Swap ä½¿ç”¨å¯èƒ½å¯¼è‡´ç³»ç»Ÿæ€§èƒ½ä¸‹é™  \nâœ“ å¯èƒ½å‡ºç°å†…å­˜ä¸è¶³ï¼Œé¢‘ç¹çš„ Swap è¯»å†™å½±å“ç£ç›˜å¯¿å‘½  \nâœ“ ä¸šåŠ¡è¿›ç¨‹å¯èƒ½å—åˆ°å†…å­˜å‹åŠ›ï¼Œå“åº”å»¶è¿ŸåŠ å¤§  \n\nè¯·æ£€æŸ¥ç³»ç»Ÿå†…å­˜ä½¿ç”¨æƒ…å†µï¼Œä¼˜åŒ–å†…å­˜ç®¡ç†æˆ–æ‰©å®¹å†…å­˜",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "((1 - (node_memory_SwapFree_bytes / node_memory_SwapTotal_bytes)) * 100 > 80) * on(instance) group_left (nodename) node_uname_info{nodename=~\".+\"}",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Host"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 300s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "ä¸»æœºå†…å­˜ä¸è¶³",
    "note": "{{$labels.instance}} ä¸»æœºå†…å­˜å¯ç”¨ç‡è¿‡ä½\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**\nâ–¸ ç›®æ ‡ä¸»æœºï¼š`{{$labels.instance}}`  \nâ–¸ ä¸»æœºåç§°ï¼š`{{$labels.nodename}}`  \nâ–¸ å½“å‰å¯ç”¨å†…å­˜å æ¯”ï¼š{{ printf \"%.1f\" $value }}%  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šå†…å­˜å¯ç”¨ç‡ä½äº 10%\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ ä¸»æœºå†…å­˜ç´§å¼ ï¼Œå¯èƒ½å¯¼è‡´ç¨‹åº OOM æˆ–å“åº”å˜æ…¢  \nâœ“ ç³»ç»Ÿå¯èƒ½å¼€å§‹ä½¿ç”¨ swapï¼Œè¿›ä¸€æ­¥å½±å“æ€§èƒ½  \nâœ“ å†…å­˜å ç”¨æŒç»­å¢é•¿å¯èƒ½å­˜åœ¨æ³„æ¼é£é™©  \n\nè¯·æ£€æŸ¥å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œä¼˜åŒ–è¿›ç¨‹èµ„æºæˆ–è€ƒè™‘æ‰©å®¹å†…å­˜",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "(node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes * 100 < 10) * on(instance) group_left (nodename) node_uname_info{nodename=~\".+\"}",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Host"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "ä¸»æœºå†…å­˜å‹åŠ›è¿‡å¤§",
    "note": "{{$labels.instance}} ä¸»æœºå†…å­˜å‹åŠ›è¿‡å¤§\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**\nâ–¸ ç›®æ ‡ä¸»æœºï¼š`{{$labels.instance}}`  \nâ–¸ ä¸»æœºåç§°ï¼š`{{$labels.nodename}}`  \nâ–¸ å½“å‰ä¸»ç¼ºé¡µä¸­æ–­é€Ÿç‡ï¼š{{ printf \"%.0f\" $value }} æ¬¡/åˆ†é’Ÿ  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šä¸»ç¼ºé¡µä¸­æ–­æ•°è¶…è¿‡ 1000 æ¬¡/åˆ†é’Ÿ\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ ä¸»æœºå†…å­˜å¯èƒ½ä¸è¶³ï¼Œé¢‘ç¹ä»ç£ç›˜è¯»å–æ•°æ®é¡µ  \nâœ“ åº”ç”¨ç¨‹åºè®¿é—®å†…å­˜æ€§èƒ½ä¸‹é™ï¼Œå“åº”å˜æ…¢  \nâœ“ å­˜åœ¨å¤§é‡äº¤æ¢æˆ–å†…å­˜äº‰ç”¨ï¼Œå½±å“ç³»ç»Ÿç¨³å®šæ€§  \n\nè¯·æ£€æŸ¥ä¸»æœºå†…å­˜ä½¿ç”¨æƒ…å†µï¼Œä¼˜åŒ–ç¨‹åºå†…å­˜ä½¿ç”¨æˆ–è€ƒè™‘æ‰©å®¹å†…å­˜èµ„æº",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "(rate(node_vmstat_pgmajfault[2m]) > 1000) * on(instance) group_left (nodename) node_uname_info{nodename=~\".+\"}",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Host"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "ä¸»æœºæ–‡ä»¶æè¿°ç¬¦ä½¿ç”¨ç‡è¿‡é«˜å‘Šè­¦",
    "note": "{{$labels.instance}} æ–‡ä»¶æè¿°ç¬¦ä½¿ç”¨ç‡å‘Šè­¦\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ ä¸»æœºå®ä¾‹ï¼š`{{$labels.instance}}`  \nâ–¸ å½“å‰æ–‡ä»¶æè¿°ç¬¦ä½¿ç”¨ç‡ï¼ˆå°æ•°å½¢å¼ï¼Œ0.9 å³ 90%ï¼‰ï¼š`{{$value}}`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šæ–‡ä»¶æè¿°ç¬¦ä½¿ç”¨ç‡ > 0.9ï¼ˆå³90%ï¼‰\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ æ–‡ä»¶æè¿°ç¬¦æ¥è¿‘ä¸Šé™ï¼Œå¯èƒ½å¯¼è‡´è¿æ¥å¤±è´¥æˆ–åº”ç”¨å¼‚å¸¸  \nâœ“ å»ºè®®æ£€æŸ¥æ‰“å¼€æ–‡ä»¶å¥æŸ„æ•°ï¼Œé¿å…èµ„æºè€—å°½\n\nè¯·åŠæ—¶æ’æŸ¥ç³»ç»Ÿèµ„æºã€‚",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "(\n  node_filefd_allocated{job=\"node-exporter\"} * 100 / node_filefd_maximum{job=\"node-exporter\"} > 90\n)",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Host"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "ä¸»æœºæ—¶é’Ÿå‡ºç°åå·®",
    "note": "{{$labels.instance}} ç³»ç»Ÿæ—¶é—´æ¼‚ç§»å¼‚å¸¸\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**\nâ–¸ ç›®æ ‡ä¸»æœºï¼š`{{$labels.instance}}`  \nâ–¸ ä¸»æœºåç§°ï¼š`{{$labels.nodename}}`  \nâ–¸ å½“å‰åç§»ï¼š`{{ $value }} ç§’`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šæ—¶é—´åç§»è¶…è¿‡ Â±0.05 ç§’ï¼Œä¸”ä»åœ¨æŒç»­æ‰©å¤§  \n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ ç³»ç»Ÿæ—¶é—´åç¦»æ ‡å‡† NTPï¼Œå¯èƒ½å¯¼è‡´æ—¥å¿—é”™ä¹±ã€å®šæ—¶ä»»åŠ¡å¼‚å¸¸  \nâœ“ æ•°æ®åº“ã€Kafkaã€é›†ç¾¤ç­‰ä¾èµ–æ—¶é—´åŒæ­¥çš„ç»„ä»¶å¯èƒ½æŠ¥é”™  \nâœ“ æ—¶é—´æŒç»­æ¼‚ç§»å°†åŠ å‰§ç³»ç»Ÿæ•…éšœé£é™©  \n\nè¯·æ£€æŸ¥ä¸»æœº NTP åŒæ­¥çŠ¶æ€ã€æ—¶é’ŸæœåŠ¡ï¼ˆå¦‚ `chronyd`, `ntpd`ï¼‰æ˜¯å¦å¼‚å¸¸",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "((node_timex_offset_seconds > 0.05 and deriv(node_timex_offset_seconds[5m]) >= 0) or (node_timex_offset_seconds < -0.05 and deriv(node_timex_offset_seconds[5m]) <= 0)) * on(instance) group_left (nodename) node_uname_info{nodename=~\".+\"}",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Host"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "ä¸»æœºæ˜¯å¦æ­£å¸¸",
    "note": "{{$labels.instance}} å®ä¾‹å¼‚å¸¸\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ å®ä¾‹åœ°å€ï¼š`{{$labels.instance}}`  \nâ–¸ Job åç§°ï¼š`{{$labels.job}}`  \nâ–¸ å½“å‰çŠ¶æ€ï¼šæœªä¸ŠæŠ¥ï¼ˆup = 0ï¼‰  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šNode Exporter å®ä¾‹æ— æ³•è¢« Prometheus é‡‡é›†\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ ä¸»æœºç›‘æ§æ•°æ®æ— æ³•è·å–ï¼Œå½±å“èŠ‚ç‚¹çŠ¶æ€åˆ†æ  \nâœ“ å¯èƒ½ç”±äºèŠ‚ç‚¹å®•æœºã€Exporter å¼‚å¸¸ã€ç½‘ç»œæ•…éšœæˆ–æœåŠ¡æœªå¯åŠ¨  \n\nè¯·æ£€æŸ¥å¯¹åº”èŠ‚ç‚¹æˆ–æœåŠ¡çŠ¶æ€ï¼Œç¡®ä¿ Node Exporter æ­£å¸¸è¿è¡Œã€‚",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 30,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "up{job=~\"(node-exporter|.*-node-exporter)\"} == 0",
          "severity": 1,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Host"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 30s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "ä¸»æœºç‰©ç†ç»„ä»¶è¿‡çƒ­",
    "note": "{{$labels.instance}} ä¸»æœºæ¸©åº¦è¿‡é«˜å‘Šè­¦\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**\nâ–¸ ç›®æ ‡ä¸»æœºï¼š`{{$labels.instance}}`  \nâ–¸ ä¸»æœºåç§°ï¼š`{{$labels.nodename}}`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šç›‘æµ‹åˆ°æ¸©åº¦ä¼ æ„Ÿå™¨è¯»æ•°è¶…è¿‡ 80â„ƒ  \nâ–¸ å½“å‰æ¸©åº¦ï¼š{{ printf \"%.1f\" $value }}â„ƒ  \n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ ä¸»æœºæ¸©åº¦è¿‡é«˜å¯èƒ½å¯¼è‡´ç¡¬ä»¶æŸåæˆ–æ€§èƒ½ä¸‹é™  \nâœ“ é•¿æ—¶é—´é«˜æ¸©ä¼šç¼©çŸ­è®¾å¤‡å¯¿å‘½ï¼Œå¢åŠ æ•…éšœé£é™©  \nâœ“ è¯·æ£€æŸ¥æœåŠ¡å™¨æ•£çƒ­ç³»ç»ŸåŠç¯å¢ƒæ¸©åº¦ï¼ŒåŠæ—¶æ’æŸ¥å¼‚å¸¸\n\nå»ºè®®å°½å¿«æ’æŸ¥é£æ‰‡ã€æ•£çƒ­å™¨å·¥ä½œçŠ¶æ€ï¼Œé¿å…ç¡¬ä»¶æ•…éšœ",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 300,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "((node_hwmon_temp_celsius * ignoring(label) group_left(instance, job, node, sensor) node_hwmon_sensor_label{label!=\"tctl\"} > 80)) * on(instance) group_left (nodename) node_uname_info{nodename=~\".+\"}",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Host"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 300s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "ä¸»æœºç£ç›˜IOå¼‚å¸¸",
    "note": "{{$labels.instance}} ç£ç›˜ IO è´Ÿè½½è¿‡é«˜\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**\nâ–¸ ç›®æ ‡ä¸»æœºï¼š`{{$labels.instance}}`  \nâ–¸ ä¸»æœºåç§°ï¼š`{{$labels.nodename}}`  \nâ–¸ ç£ç›˜ IO åˆ©ç”¨ç‡ï¼š`{{ printf \"%.2f\" $value }}` (ç§’/ç§’)  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šç£ç›˜ IO ä½¿ç”¨ç‡è¶…è¿‡ 0.5ï¼ˆå³ 50%ï¼‰\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ ç£ç›˜ IO èµ„æºç´§å¼ ï¼Œå¯èƒ½å¯¼è‡´åº”ç”¨å“åº”å˜æ…¢  \nâœ“ æ•°æ®åº“è¯»å†™å»¶è¿Ÿå¢åŠ ï¼Œå½±å“æ•´ä½“ä¸šåŠ¡æ€§èƒ½  \nâœ“ å¯èƒ½å­˜åœ¨ç£ç›˜ç“¶é¢ˆæˆ–å¼‚å¸¸ IO è¿›ç¨‹\n\nè¯·æ£€æŸ¥ç£ç›˜è´Ÿè½½ã€ç›¸å…³è¿›ç¨‹å’Œç³»ç»Ÿ IO è°ƒåº¦ç­–ç•¥",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 300,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "(rate(node_disk_io_time_seconds_total[2m]) > 0.5) * on(instance) group_left (nodename) node_uname_info{nodename=~\".+\"}",
          "severity": 3,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Host"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 2,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "ä¸»æœºç£ç›˜å‰©ä½™å®¹é‡ä½äº10%",
    "note": "{{$labels.instance}} ä¸Šæ–‡ä»¶ç³»ç»Ÿ `{{$labels.mountpoint}}` å‰©ä½™ç©ºé—´ä½äº 10%\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**\nâ–¸ ç›®æ ‡ä¸»æœºï¼š`{{$labels.instance}}`  \nâ–¸ ä¸»æœºåç§°ï¼š`{{$labels.nodename}}`  \nâ–¸ æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç‚¹ï¼š`{{$labels.mountpoint}}`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šå‰©ä½™ç©ºé—´ç™¾åˆ†æ¯”ä½äºç­‰äº 10%ï¼Œä¸”æ–‡ä»¶ç³»ç»Ÿéåªè¯»  \n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ æ–‡ä»¶ç³»ç»Ÿå‰©ä½™ç©ºé—´ä¸è¶³ï¼Œå¯èƒ½å¯¼è‡´å†™å…¥å¤±è´¥  \nâœ“ ä¸šåŠ¡è¿›ç¨‹å¯èƒ½å› ç£ç›˜æ»¡è€Œå¼‚å¸¸é€€å‡º  \nâœ“ éœ€å°½å¿«æ¸…ç†ç£ç›˜åƒåœ¾æ–‡ä»¶æˆ–æ‰©å®¹åˆ†åŒº  \n\nè¯·é‡ç‚¹æ£€æŸ¥ä¸»æœº `{{$labels.instance}}` ä¸ŠæŒ‚è½½ç‚¹ `{{$labels.mountpoint}}` çš„ç£ç›˜ä½¿ç”¨æƒ…å†µï¼ŒåŠæ—¶é‡Šæ”¾æˆ–æ‰©å®¹ç£ç›˜ç©ºé—´",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "((node_filesystem_avail_bytes{device!~\"nsfs|tmpfs|none\",mountpoint!~\"/boot.*\"} * 100) / node_filesystem_size_bytes{device!~\"nsfs|tmpfs|none\",mountpoint!~\"/boot.*\"} <= 10 and ON (instance, device, mountpoint) node_filesystem_readonly == 0) * on(instance) group_left (nodename) node_uname_info{nodename=~\".+\"}",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Host"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "ä¸»æœºç½‘ç»œååé‡å¼‚å¸¸(è¾“å…¥)",
    "note": "{{$labels.instance}} ä¸»æœºç½‘ç»œæ¥æ”¶é€Ÿç‡è¿‡é«˜\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯** \nâ–¸ ç›®æ ‡ä¸»æœºï¼š`{{$labels.instance}}`  \nâ–¸ ä¸»æœºåç§°ï¼š`{{$labels.nodename}}`  \nâ–¸ å½“å‰æ¥æ”¶é€Ÿç‡ï¼š{{ printf \"%.2f\" $value }} MB/s  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šç½‘ç»œæ¥æ”¶é€Ÿç‡è¶…è¿‡ 100 MB/s\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ ç½‘ç»œæµé‡è¿‡é«˜å¯èƒ½å¯¼è‡´å¸¦å®½æ‹¥å¡  \nâœ“ å¯èƒ½å½±å“å…¶ä»–ä¸šåŠ¡ç½‘ç»œæ€§èƒ½  \nâœ“ éœ€æ’æŸ¥å¼‚å¸¸æµé‡æºæˆ–ä¼˜åŒ–ç½‘ç»œé…ç½®  \n\nè¯·å…³æ³¨ä¸»æœºç½‘ç»œçŠ¶å†µï¼Œé¿å…å› æµé‡è¿‡è½½å¯¼è‡´ä¸šåŠ¡ä¸­æ–­",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "(sum by (instance) (rate(node_network_receive_bytes_total[2m])) / 1024 / 1024 > 100) * on(instance) group_left (nodename) node_uname_info{nodename=~\".+\"}",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Host"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "ä¸»æœºç½‘ç»œååé‡å¼‚å¸¸(è¾“å‡º)",
    "note": "{{$labels.instance}} ä¸»æœºç½‘ç»œå‘é€é€Ÿç‡è¿‡é«˜\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯** \nâ–¸ ç›®æ ‡ä¸»æœºï¼š`{{$labels.instance}}`  \nâ–¸ ä¸»æœºåç§°ï¼š`{{$labels.nodename}}`  \nâ–¸ å½“å‰å‘é€é€Ÿç‡ï¼š{{ printf \"%.2f\" $value }} MB/s  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šç½‘ç»œå‘é€é€Ÿç‡è¶…è¿‡ 100 MB/s\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ ç½‘ç»œæµé‡è¿‡é«˜å¯èƒ½å¯¼è‡´å¸¦å®½æ‹¥å¡  \nâœ“ å¯èƒ½å½±å“å…¶ä»–ä¸šåŠ¡ç½‘ç»œæ€§èƒ½  \nâœ“ éœ€æ’æŸ¥å¼‚å¸¸æµé‡æºæˆ–ä¼˜åŒ–ç½‘ç»œé…ç½®  \n\nè¯·å…³æ³¨ä¸»æœºç½‘ç»œçŠ¶å†µï¼Œé¿å…å› æµé‡è¿‡è½½å¯¼è‡´ä¸šåŠ¡ä¸­æ–­",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "(sum by (instance) (rate(node_network_transmit_bytes_total[2m])) / 1024 / 1024 > 100) * on(instance) group_left(nodename) node_uname_info{nodename=~\".+\"}",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Host"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "æ£€æµ‹åˆ°ä¸»æœº OOM kill",
    "note": "{{$labels.instance}} å‘ç”Ÿ OOM Kill äº‹ä»¶\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**\nâ–¸ ç›®æ ‡ä¸»æœºï¼š`{{$labels.instance}}`  \nâ–¸ ä¸»æœºåç§°ï¼š`{{$labels.nodename}}`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šè¿‡å»1åˆ†é’Ÿå†…å‘ç”Ÿäº†å†…å­˜ä¸è¶³å¯¼è‡´çš„è¿›ç¨‹æ€æ­»äº‹ä»¶\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ æœåŠ¡å™¨å†…å­˜å‹åŠ›è¿‡å¤§ï¼Œè§¦å‘å†…æ ¸ OOM Killer  \nâœ“ å¯èƒ½å¯¼è‡´å…³é”®æœåŠ¡è¿›ç¨‹è¢«å¼‚å¸¸ç»ˆæ­¢ï¼Œå½±å“ä¸šåŠ¡ç¨³å®š  \nâœ“ å»ºè®®æ’æŸ¥å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œä¼˜åŒ–åº”ç”¨å†…å­˜ç®¡ç†æˆ–å¢åŠ å†…å­˜å®¹é‡\n\nè¯·å…³æ³¨æœåŠ¡å™¨å†…å­˜å’Œè¿›ç¨‹çŠ¶å†µï¼Œé¿å…é¢‘ç¹è§¦å‘ OOM Kill",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "(increase(node_vmstat_oom_kill[2m]) > 0) * on(instance) group_left (nodename) node_uname_info{nodename=~\".+\"}",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Host"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  }
]