[
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "ks-apiserver å®¹å™¨æœªè¿è¡Œæˆ–å¤±è”",
    "note": "KubeSphere API Server æœªè¿è¡Œæˆ–æ— ç›‘æ§æ•°æ®ä¸ŠæŠ¥\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ ç»„ä»¶åç§°ï¼š`ks-apiserver`  \nâ–¸ æ£€æµ‹æ–¹å¼ï¼šPrometheus `up == 1` å­˜åœ¨æ€§åˆ¤æ–­  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šæ— å¯ç”¨çš„ ks-apiserver å®ä¾‹ä¸ŠæŠ¥ç›‘æ§æ•°æ®\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ KubeSphere çš„æ ¸å¿ƒ API æœåŠ¡å·²ä¸å¯ç”¨  \nâœ“ ç”¨æˆ·ç•Œé¢æ“ä½œã€èµ„æºæŸ¥è¯¢ã€æƒé™è®¤è¯ç­‰åŠŸèƒ½å°†å—å½±å“  \nâœ“ å¯èƒ½å› æœåŠ¡å´©æºƒã€ç½‘ç»œä¸­æ–­ã€POD è¢«åˆ é™¤ç­‰åŸå› å¯¼è‡´\n\nè¯·ç«‹å³é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ç»„ä»¶çŠ¶æ€ï¼š\n\n```bash\nkubectl -n kubesphere-system get pods -l app=ks-apiserver",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "absent(up{job=\"ks-apiserver\"} == 1)",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=KubeSphere"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "ks-apiserver æ¥å£è¯·æ±‚å»¶è¿Ÿè¿‡é«˜ï¼ˆP99ï¼‰",
    "note": "KubeSphere API Server è¯·æ±‚å¤„ç†å»¶è¿Ÿå¼‚å¸¸ï¼ˆP99ï¼‰\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ èŠ‚ç‚¹å®ä¾‹ï¼š`{{$labels.instance}}`  \nâ–¸ API ç‰ˆæœ¬ï¼š`{{$labels.version}}`  \nâ–¸ è¯·æ±‚æ–¹æ³•ï¼š`{{$labels.verb}}`  \nâ–¸ èµ„æºç±»å‹ï¼š`{{$labels.resource}}`  \nâ–¸ API åˆ†ç»„ï¼š`{{$labels.group}}`  \nâ–¸ å½“å‰ P99 å»¶è¿Ÿï¼š{{ printf \"%.2f\" $value }} ç§’  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šks-apiserver è¯·æ±‚å¤„ç† P99 è¶…è¿‡ 5 ç§’ï¼ˆ5 åˆ†é’Ÿçª—å£ï¼‰\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ API Server è¯·æ±‚å»¶è¿Ÿè¿‡é«˜ï¼Œç”¨æˆ·ç•Œé¢æ“ä½œå¯èƒ½å¡é¡¿æˆ–å¤±è´¥  \nâœ“ ç®¡ç†å¹³å°æ¥å£è°ƒç”¨ç¼“æ…¢ï¼Œå¯èƒ½å½±å“ DevOpsã€åº”ç”¨éƒ¨ç½²ã€å®¡è®¡ç­‰åŠŸèƒ½  \nâœ“ å¯èƒ½ç”±æ•°æ®åº“æ…¢æŸ¥è¯¢ã€èµ„æºäº‰ç”¨æˆ–ç³»ç»Ÿè´Ÿè½½è¿‡é«˜å¼•èµ·\n\nè¯·æ£€æŸ¥ apiserver æ‰€åœ¨èŠ‚ç‚¹èµ„æºã€ä¾èµ–æœåŠ¡ï¼ˆå¦‚ MySQLã€Redisï¼‰åŠç½‘ç»œçŠ¶å†µ",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "histogram_quantile(\n  0.99,\n  sum by(instance, group, resource, verb, version, le, cluster) (\n    rate(ks_server_request_duration_seconds_bucket{group!=\"terminal.kubesphere.io\", job=\"ks-apiserver\"}[5m])\n  )\n) > 5",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=KubeSphere"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "ks-controller-manager å®¹å™¨æœªè¿è¡Œæˆ–æ¢æµ‹å¤±è´¥",
    "note": "KubeSphere æ§åˆ¶å™¨ç®¡ç†å™¨æœªè¿è¡Œæˆ–æ— æ•°æ®ä¸ŠæŠ¥\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ ç»„ä»¶åç§°ï¼š`ks-controller-manager`  \nâ–¸ æ£€æµ‹è¡¨è¾¾å¼ï¼š`absent(up == 1)`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šç»„ä»¶æœªåœ¨ Prometheus ä¸­æ³¨å†Œï¼Œæˆ–æœªæ­£å¸¸å“åº”æ¢æµ‹\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ æ§åˆ¶å™¨å¯èƒ½æœªå¯åŠ¨ã€å¼‚å¸¸é€€å‡ºæˆ–å·²è¢«åˆ é™¤  \nâœ“ ç»„ä»¶æœªæš´éœ² /metrics æ¥å£æˆ–è¢« Prometheus å¿½ç•¥  \nâœ“ Kubernetes æ§åˆ¶é¢é€»è¾‘ï¼ˆå¦‚ DevOpsã€æµæ°´çº¿ç­‰ï¼‰å¯èƒ½å—å½±å“\n\nè¯·æ£€æŸ¥è¯¥ç»„ä»¶çš„éƒ¨ç½²çŠ¶æ€ï¼ˆkubectl get podï¼‰ï¼Œå¹¶ç¡®è®¤å…¶æ˜¯å¦è¿è¡Œå¹¶æ­£å¸¸æš´éœ²ç›‘æ§ç«¯å£",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "absent(up{job=\"ks-controller-manager\"} == 1)",
          "severity": 1,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=KubeSphere"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kube-State-Metrics List æ“ä½œé”™è¯¯ç‡è¿‡é«˜",
    "note": "{{$labels.namespace}} / {{$labels.service}} Kube-State-Metrics List æ“ä½œé”™è¯¯ç‡å¼‚å¸¸\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ å‘½åç©ºé—´ï¼š`{{$labels.namespace}}`  \nâ–¸ æœåŠ¡åç§°ï¼š`{{$labels.service}}`  \nâ–¸ å½“å‰é”™è¯¯ç‡ï¼ˆå•ä½æ¯”ä¾‹ï¼‰ï¼š`{{$value}}`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šList æ“ä½œä¸­é”™è¯¯ç‡è¶…è¿‡ 0.01ï¼ˆå³ 1%ï¼‰\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ kube-state-metrics ä¸ API Server é€šä¿¡å¯èƒ½å­˜åœ¨é”™è¯¯æˆ–è¢«é™æµ  \nâœ“ List æ“ä½œå¤±è´¥å¯èƒ½å¯¼è‡´ç›‘æ§é‡‡é›†ä¸å®Œæ•´ï¼Œæ•°æ®ç¼ºå¤±  \nâœ“ è‹¥æŒç»­å¼‚å¸¸ï¼Œéœ€æ£€æŸ¥ API Server çš„å¥åº·çŠ¶æ€å’Œè°ƒç”¨é¢‘ç‡\n\nå»ºè®®æ’æŸ¥ `kube-state-metrics` çš„è®¿é—®æƒé™ã€é™æµé…ç½®åŠå…¶æ‰€åœ¨èŠ‚ç‚¹ç½‘ç»œè¿é€šæ€§ã€‚",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "(sum by(cluster,namespace,service) (rate(kube_state_metrics_list_total{job=\"kube-state-metrics\",result=\"error\"}[5m]))\n  /\nsum by(cluster,namespace,service) (rate(kube_state_metrics_list_total{job=\"kube-state-metrics\"}[5m])))\n> 0.01",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kube-State-Metrics Shard åºå·å¼‚å¸¸",
    "note": "{{$labels.namespace}} / {{$labels.service}} Shard åºå·å¼‚å¸¸\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ å‘½åç©ºé—´ï¼š`{{$labels.namespace}}`  \nâ–¸ æœåŠ¡åç§°ï¼š`{{$labels.service}}`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šShard åºå·åˆ†å¸ƒå¼‚å¸¸ï¼Œç¼–å·ç¼ºå¤±æˆ–ä¸è¿ç»­\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ shard ç¼–å·å¼‚å¸¸å¯èƒ½å¯¼è‡´éƒ¨åˆ†æ•°æ®æ— æ³•é‡‡é›†æˆ–å†™å…¥  \nâœ“ å¯èƒ½å‡ºç°ç›‘æ§æ•°æ®ä¸¢å¤±ã€æŠ¥è­¦é—æ¼ç­‰é—®é¢˜  \nâœ“ éœ€æ£€æŸ¥ shard é…ç½®ã€éƒ¨ç½²çŠ¶æ€åŠç½‘ç»œé€šä¿¡æ˜¯å¦æ­£å¸¸  \n\nè¯·å°½å¿«æ’æŸ¥ shard é…ç½®ä¸çŠ¶æ€ï¼Œç¡®ä¿æ•°æ®é‡‡é›†å®Œæ•´å¯é ã€‚",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "2^max by(cluster,namespace,service) (kube_state_metrics_total_shards{job=\"kube-state-metrics\"}) - 1\n  -\nsum by(cluster,namespace,service) ( 2 ^ max by (shard_ordinal,cluster,namespace,service) (kube_state_metrics_shard_ordinal{job=\"kube-state-metrics\"}) )\n!= 0",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kube-State-Metrics Shard æ•°é‡æ³¢åŠ¨å¼‚å¸¸",
    "note": "{{$labels.namespace}} / {{$labels.service}} Shard æ•°é‡æ³¢åŠ¨å¼‚å¸¸\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ å‘½åç©ºé—´ï¼š`{{$labels.namespace}}`  \nâ–¸ æœåŠ¡åç§°ï¼š`{{$labels.service}}`  \nâ–¸ å½“å‰æ–¹å·®å€¼ï¼š`{{$value}}`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šShard æ•°é‡çš„æ–¹å·®ä¸ä¸º 0ï¼Œå­˜åœ¨å¼‚å¸¸æ³¢åŠ¨  \n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ Shard æ•°é‡å¼‚å¸¸æ³¢åŠ¨ï¼Œå¯èƒ½å¯¼è‡´æ•°æ®é‡‡é›†ä¸ç¨³å®š  \nâœ“ å¯èƒ½å­˜åœ¨é…ç½®ä¸ä¸€è‡´ã€åˆ†ç‰‡å˜æ›´æˆ–æœåŠ¡é‡å¯ç­‰é—®é¢˜  \nâœ“ å½±å“ç›‘æ§æ•°æ®çš„å®Œæ•´æ€§å’Œå‡†ç¡®æ€§  \n\nè¯·æ’æŸ¥ç›¸å…³æœåŠ¡é…ç½®å’ŒçŠ¶æ€ï¼Œç¡®è®¤ shard å˜åŠ¨åŸå› ï¼Œç¡®ä¿ç›‘æ§ç¨³å®šã€‚",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "stdvar by(cluster,namespace,service) (kube_state_metrics_total_shards{job=\"kube-state-metrics\"}) != 0",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kube-State-Metrics Watch æ“ä½œé”™è¯¯ç‡è¿‡é«˜",
    "note": "{{$labels.namespace}} / {{$labels.service}} Watch æ“ä½œé”™è¯¯ç‡å¼‚å¸¸\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ å‘½åç©ºé—´ï¼š`{{$labels.namespace}}`  \nâ–¸ æœåŠ¡åç§°ï¼š`{{$labels.service}}`  \nâ–¸ å½“å‰é”™è¯¯ç‡ï¼ˆæ¯”ä¾‹å€¼ï¼‰ï¼š`{{$value}}`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šWatch æ“ä½œä¸­é”™è¯¯ç‡è¶…è¿‡ 0.01ï¼ˆå³ 1%ï¼‰\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ Watch æ“ä½œå¤±è´¥å¯èƒ½å¯¼è‡´èµ„æºå˜æ›´äº‹ä»¶æœªèƒ½åŠæ—¶æ•æ‰  \nâœ“ kube-state-metrics ä¸ Kubernetes API Server é€šä¿¡å¼‚å¸¸  \nâœ“ è‹¥æŒç»­å­˜åœ¨é”™è¯¯ï¼Œå¯èƒ½å½±å“ç›‘æ§å‡†ç¡®æ€§å’Œç³»ç»Ÿç¨³å®šæ€§\n\nè¯·æ£€æŸ¥ API Server è®¿é—®æ˜¯å¦æ­£å¸¸ï¼Œæ’æŸ¥ kube-state-metrics çš„è°ƒç”¨é¢‘ç‡ã€æƒé™é…ç½®å’ŒèŠ‚ç‚¹è¿é€šæ€§ã€‚",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "(sum by(cluster,namespace,service) (rate(kube_state_metrics_watch_total{job=\"kube-state-metrics\",result=\"error\"}[5m]))\n  /\nsum by(cluster,namespace,service) (rate(kube_state_metrics_watch_total{job=\"kube-state-metrics\"}[5m])))\n> 0.01",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubelet Server è¯ä¹¦å³å°†è¿‡æœŸ",
    "note": "{{$labels.instance}} èŠ‚ç‚¹çš„ Kubelet Server è¯ä¹¦å³å°†è¿‡æœŸ\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ å®ä¾‹ï¼š`{{$labels.instance}}`  \nâ–¸ å‰©ä½™æœ‰æ•ˆæœŸï¼š`{{ printf \"%.1f\" $value }}` å¤©  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šServer è¯ä¹¦å‰©ä½™æœ‰æ•ˆæœŸå°äº 7 å¤©\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ Server è¯ä¹¦å³å°†è¿‡æœŸï¼ŒKubelet ä¸ API Server çš„å®‰å…¨é€šä¿¡å¯èƒ½ä¸­æ–­  \nâœ“ è‹¥æœªåŠæ—¶ç»­ç­¾ï¼ŒèŠ‚ç‚¹å¯èƒ½è¢«é›†ç¾¤å‰”é™¤ï¼Œå½±å“æ­£å¸¸è°ƒåº¦å’Œç®¡ç†  \nâœ“ è¯ä¹¦è¿‡æœŸè¿˜å¯èƒ½å¯¼è‡´ Kubelet æ— æ³•ç›‘å¬å®‰å…¨ç«¯å£ï¼Œå½±å“èŠ‚ç‚¹å¥åº·çŠ¶æ€  \n\nå»ºè®®æ£€æŸ¥ï¼š  \n- æ˜¯å¦å¼€å¯äº† `--rotate-server-certificates` è¯ä¹¦è‡ªåŠ¨è½®æ¢åŠŸèƒ½  \n- æŸ¥çœ‹ kubelet æ—¥å¿—ä¸­æ˜¯å¦æœ‰è¯ä¹¦ç»­ç­¾å¤±è´¥çš„æŠ¥é”™  \n- å¿…è¦æ—¶é‡å¯ kubelet æˆ–æ‰‹åŠ¨æ›´æ–°è¯ä¹¦  ",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "kubelet_certificate_manager_server_ttl_seconds / 86400 < 7",
          "severity": 1,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubelet Server è¯ä¹¦ç»­ç­¾å¤±è´¥å‘Šè­¦",
    "note": "{{$labels.instance}} èŠ‚ç‚¹çš„ Kubelet Server è¯ä¹¦ç»­ç­¾å¤±è´¥\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ å®ä¾‹ï¼š`{{$labels.instance}}`  \nâ–¸ æœ€è¿‘ 5 åˆ†é’Ÿå†…ç»­ç­¾é”™è¯¯æ¬¡æ•°ï¼š`{{$value}}` æ¬¡  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šç»­ç­¾é”™è¯¯æ¬¡æ•°å¢åŠ ï¼ˆ> 0ï¼‰\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ Server è¯ä¹¦ç»­ç­¾å¤±è´¥å¯èƒ½å¯¼è‡´ Kubelet æ— æ³•å¯åŠ¨å®‰å…¨ç›‘å¬ç«¯å£  \nâœ“ èŠ‚ç‚¹å¯èƒ½æ— æ³•ä¸é›†ç¾¤ç»„ä»¶è¿›è¡Œå®‰å…¨é€šä¿¡ï¼Œå½±å“é›†ç¾¤æ­£å¸¸è¿è¡Œ  \nâœ“ é•¿æœŸç»­ç­¾å¤±è´¥ä¼šå¯¼è‡´èŠ‚ç‚¹æœåŠ¡ä¸å¯ç”¨æˆ–è¢«å‰”é™¤å‡ºé›†ç¾¤  \n\nè¯·åŠæ—¶æ’æŸ¥ï¼š\n- ç¡®è®¤æ˜¯å¦å¯ç”¨äº† `--rotate-server-certificates` å‚æ•°  \n- æŸ¥çœ‹ kubelet æ—¥å¿—ä¸­æ˜¯å¦æœ‰è¯ä¹¦ç»­ç­¾å¤±è´¥ç›¸å…³æŠ¥é”™  \n- æ£€æŸ¥èŠ‚ç‚¹æ—¶é—´åŒæ­¥å’Œç½‘ç»œè¿é€šæ€§  \n- å¿…è¦æ—¶é‡å¯ kubelet æˆ–æ‰‹åŠ¨æ›´æ–°è¯ä¹¦",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 30,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "increase(kubelet_server_expiration_renew_errors[5m]) > 0",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 30s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubelet å¤„ç† Pod å»¶è¿Ÿå‘Šè­¦",
    "note": "{{$labels.node}} èŠ‚ç‚¹ Kubelet å¤„ç† Pod è€—æ—¶è¿‡é«˜\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ èŠ‚ç‚¹åç§°ï¼š`{{$labels.node}}`  \nâ–¸ å®ä¾‹ï¼š`{{$labels.instance}}`  \nâ–¸ P99 Pod å¤„ç†è€—æ—¶ï¼š`{{$value}}` ç§’  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šKubelet pod_worker_duration P99 > 60 ç§’ï¼ˆæœ€è¿‘ 5 åˆ†é’Ÿï¼‰\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ Kubelet å¯¹ Pod ç”Ÿå‘½å‘¨æœŸäº‹ä»¶å“åº”ç¼“æ…¢ï¼Œå¯èƒ½å¯¼è‡´è°ƒåº¦å»¶è¿Ÿæˆ–çŠ¶æ€æ¼‚ç§»  \nâœ“ å®¹å™¨é‡å»ºã€æ¢é’ˆå¤±è´¥ã€èµ„æºåˆ†é…å»¶è¿Ÿç­‰é£é™©å¢åŠ   \nâœ“ å¸¸è§åŸå› åŒ…æ‹¬èŠ‚ç‚¹èµ„æºè€—å°½ã€IO ç“¶é¢ˆã€å®¹å™¨å¼‚å¸¸ã€Kubelet é˜»å¡\n\nå»ºè®®æ£€æŸ¥ï¼š\n- è¯¥èŠ‚ç‚¹çš„ CPUã€å†…å­˜ã€ç£ç›˜ IO çŠ¶å†µ  \n- Kubelet è¿›ç¨‹æ˜¯å¦è´Ÿè½½å¼‚å¸¸æˆ–æ—¥å¿—ä¸­æœ‰é”™è¯¯  \n- è°ƒåº¦é˜Ÿåˆ—ã€æ¢é’ˆæ‰§è¡Œæƒ…å†µ",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "histogram_quantile(0.99, sum(rate(kubelet_pod_worker_duration_seconds_bucket{job=\"kubelet\"}[5m])) by (instance, le, cluster)) \n* on(instance, cluster) group_left(node) kubelet_node_name{job=\"kubelet\"} > 60",
          "severity": 3,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubelet å®¢æˆ·ç«¯è¯ä¹¦å³å°†è¿‡æœŸ",
    "note": "{{$labels.instance}} èŠ‚ç‚¹çš„ Kubelet å®¢æˆ·ç«¯è¯ä¹¦å³å°†è¿‡æœŸ\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ å®ä¾‹ï¼š`{{$labels.instance}}`  \nâ–¸ å‰©ä½™æœ‰æ•ˆæœŸï¼š`{{$value}}` å¤©  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šè¯ä¹¦å‰©ä½™æ—¶é—´å°‘äº 7 å¤©\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ Kubelet è¯ä¹¦å³å°†è¿‡æœŸï¼Œå¯èƒ½å¯¼è‡´æ— æ³•è¿æ¥ API Server  \nâœ“ èŠ‚ç‚¹çŠ¶æ€å¼‚å¸¸ã€Pod æ— æ³•è°ƒåº¦ã€è‡ªåŠ¨ç»­ç­¾å¤±è´¥é£é™©é«˜  \nâœ“ è‹¥è¯ä¹¦å½»åº•å¤±æ•ˆï¼ŒKubelet ä¼šè¢«é›†ç¾¤å‰”é™¤\n\nè¯·æ£€æŸ¥ï¼š\n- Kubelet æ˜¯å¦å¯ç”¨äº†è¯ä¹¦è‡ªåŠ¨è½®æ¢ï¼ˆ--rotate-certificatesï¼‰  \n- èŠ‚ç‚¹ç³»ç»Ÿæ—¶é—´ä¸é›†ç¾¤æ—¶é—´æ˜¯å¦ä¸€è‡´  \n- æ—¥å¿—ä¸­æ˜¯å¦å­˜åœ¨è½®æ¢å¤±è´¥æˆ–è¯ä¹¦å¼‚å¸¸æç¤º",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "kubelet_certificate_manager_client_ttl_seconds / 86400 < 7",
          "severity": 1,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 360,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 300s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubelet å®¢æˆ·ç«¯è¯ä¹¦ç»­ç­¾å¤±è´¥å‘Šè­¦",
    "note": "{{$labels.instance}} èŠ‚ç‚¹çš„ Kubelet å®¢æˆ·ç«¯è¯ä¹¦ç»­ç­¾å¤±è´¥\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ å®ä¾‹ï¼š`{{$labels.instance}}`  \nâ–¸ æœ€è¿‘ 5 åˆ†é’Ÿå†…ç»­ç­¾é”™è¯¯æ¬¡æ•°ï¼š`{{$value}}` æ¬¡  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šç»­ç­¾é”™è¯¯æ¬¡æ•°å¢åŠ ï¼ˆ> 0ï¼‰\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ è¯ä¹¦ç»­ç­¾å¤±è´¥å¯èƒ½å¯¼è‡´ Kubelet å®¢æˆ·ç«¯è¯ä¹¦è¿‡æœŸ  \nâœ“ èŠ‚ç‚¹å¯èƒ½æ— æ³•ä¸ API Server å®‰å…¨é€šä¿¡ï¼Œå½±å“ Pod è°ƒåº¦å’ŒçŠ¶æ€åŒæ­¥  \nâœ“ é•¿æœŸç»­ç­¾å¤±è´¥ä¼šå¯¼è‡´èŠ‚ç‚¹è¢«é›†ç¾¤å‰”é™¤ï¼Œå½±å“ä¸šåŠ¡ç¨³å®šæ€§\n\nè¯·åŠæ—¶æ’æŸ¥ï¼š\n- kubelet è¯ä¹¦è‡ªåŠ¨è½®æ¢é…ç½®æ˜¯å¦æ­£å¸¸ï¼ˆ`--rotate-certificates`ï¼‰  \n- èŠ‚ç‚¹ç³»ç»Ÿæ—¶é—´å’Œ API Server æ—¶é—´æ˜¯å¦åŒæ­¥  \n- kubelet æ—¥å¿—ä¸­æ˜¯å¦å­˜åœ¨ç»­ç­¾é”™è¯¯æˆ–å¼‚å¸¸ä¿¡æ¯  \n- ç½‘ç»œè¿é€šæ€§æ˜¯å¦æ­£å¸¸",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 30,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "increase(kubelet_certificate_manager_client_expiration_renew_errors[5m]) > 0",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 30s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubelet èŠ‚ç‚¹æœåŠ¡çŠ¶æ€å¼‚å¸¸",
    "note": "{{$labels.instance}} èŠ‚ç‚¹çš„ kubelet æœåŠ¡ä¸å¯ç”¨\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ ç›®æ ‡ Jobï¼š`kubelet`  \nâ–¸ å½“å‰çŠ¶æ€ï¼š`down`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šup æŒ‡æ ‡ä¸º 0 æˆ–æ— æ•°æ®  \n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ è¯¥èŠ‚ç‚¹ kubelet æœåŠ¡å¼‚å¸¸ï¼Œæ— æ³•æ­£å¸¸æ±‡æŠ¥çŠ¶æ€  \nâœ“ Pod çŠ¶æ€åŒæ­¥å¤±è´¥ï¼Œè°ƒåº¦å¼‚å¸¸  \nâœ“ é›†ç¾¤å¯èƒ½æ— æ³•ç®¡ç†è¯¥èŠ‚ç‚¹  \n\nè¯·ç«‹å³æ’æŸ¥ï¼š\n- èŠ‚ç‚¹ kubelet æœåŠ¡æ˜¯å¦å¯åŠ¨  \n- ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸  \n- ç›‘æ§é‡‡é›†é…ç½®æ˜¯å¦æœ‰å˜æ›´\n",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 30,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "up{job=\"kubelet\"} == 0 or absent(up{job=\"kubelet\"})",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 30s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubernetes API Server å®¢æˆ·ç«¯è¯ä¹¦æœ‰æ•ˆæœŸä¸è¶³7å¤©",
    "note": "{{$labels.instance}} çš„ Apiserver å®¢æˆ·ç«¯è¯ä¹¦å³å°†è¿‡æœŸ\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ ç›‘æ§ç›®æ ‡å®ä¾‹ï¼š`{{$labels.instance}}`  \nâ–¸ è¯ä¹¦æœ€çŸ­å‰©ä½™æœ‰æ•ˆæœŸï¼ˆ1% åˆ†ä½ï¼‰ï¼š`{{printf \"%.1f\" $value}}` å¤© (< 7 å¤©)  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šå®¢æˆ·ç«¯è¯ä¹¦æœ‰æ•ˆæœŸä¸è¶³ 7 å¤©  \n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ è¯ä¹¦è¿‡æœŸå¯èƒ½å¯¼è‡´å®¢æˆ·ç«¯æ— æ³•å®‰å…¨è®¿é—® API Server  \nâœ“ å½±å“è®¤è¯å’Œæˆæƒï¼Œå¯èƒ½å¯¼è‡´æœåŠ¡ä¸å¯ç”¨æˆ–å¼‚å¸¸  \nâœ“ è¯·åŠæ—¶æ’æŸ¥è¯ä¹¦ç»­ç­¾åŠè‡ªåŠ¨è½®æ¢æœºåˆ¶  \n\nå»ºè®®æ’æŸ¥ï¼š  \n- è¯ä¹¦è‡ªåŠ¨è½®æ¢æ˜¯å¦æ­£å¸¸å·¥ä½œ  \n- è¯ä¹¦æ˜¯å¦å­˜åœ¨è¿‡æœŸæˆ–å³å°†è¿‡æœŸæƒ…å†µ  \n- æ£€æŸ¥ API Server æ—¥å¿—æ˜¯å¦æœ‰è¯ä¹¦ç›¸å…³é”™è¯¯  ",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 30,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "apiserver_client_certificate_expiration_seconds_count{job=\"apiserver\"} > 0 and on(job, cluster) histogram_quantile(0.01, sum by (job, le, cluster) (rate(apiserver_client_certificate_expiration_seconds_bucket{job=\"apiserver\"}[5m]))) / 86400 < 7",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 30s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubernetes API Server å®¢æˆ·ç«¯è¯·æ±‚ 5xx é”™è¯¯ç‡è¿‡é«˜",
    "note": "Kubernetes å®¢æˆ·ç«¯ç»„ä»¶è®¿é—® Apiserver å‡ºç°å¤§é‡ 5xx é”™è¯¯\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ å®ä¾‹ï¼š`{{ $labels.instance }}`  \nâ–¸ ç»„ä»¶ï¼š`{{ $labels.job }}`  \nâ–¸ å‘½åç©ºé—´ï¼š`{{ $labels.namespace }}`  \nâ–¸ å½“å‰ 5xx é”™è¯¯æ¯”ä¾‹ï¼š`{{ $value }}`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼š5 åˆ†é’Ÿå†…è¯·æ±‚ä¸­ 5xx é”™è¯¯å æ¯”è¶…è¿‡ 1%\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ æ§åˆ¶ç»„ä»¶è¯·æ±‚ Apiserver é¢‘ç¹å¤±è´¥  \nâœ“ å¯èƒ½å½±å“ controller-managerã€scheduler çš„ç¨³å®šæ€§  \nâœ“ æ£€æŸ¥ Apiserver å¥åº·ã€è´Ÿè½½æˆ–ç½‘ç»œå¼‚å¸¸",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 30,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "(sum(rate(rest_client_requests_total{code=~\"5..\"}[5m])) by (instance, job, namespace, cluster)\n  /\nsum(rate(rest_client_requests_total[5m])) by (instance, job, namespace, cluster))\n> 0.01",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 30s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubernetes API Server èŠ‚ç‚¹æ•…éšœ",
    "note": "API Server å®ä¾‹ `{{$labels.instance}}` ä¸å¯ç”¨\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ ç›‘æ§ç›®æ ‡å®ä¾‹ï¼š`{{$labels.instance}}`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šè¯¥å®ä¾‹ `up` æŒ‡æ ‡ä¸º 0ï¼Œè¡¨ç¤ºå®ä¾‹ä¸å¯è¾¾  \n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ è¯¥ Apiserver å®ä¾‹ä¸å¯ç”¨ï¼Œå¯èƒ½å¯¼è‡´éƒ¨åˆ† API è¯·æ±‚å¤±è´¥  \nâœ“ é›†ç¾¤é«˜å¯ç”¨æ€§å¯èƒ½å—å½±å“ï¼Œéœ€å…³æ³¨å…¶ä»–èŠ‚ç‚¹çŠ¶æ€  \nâœ“ å¯èƒ½ç”±äºèŠ‚ç‚¹æ•…éšœã€æœåŠ¡å®•æœºæˆ–ç½‘ç»œé—®é¢˜å¯¼è‡´  \nâœ“ è¯·å°½å¿«æ’æŸ¥å®ä¾‹çŠ¶æ€åŠç½‘ç»œè¿é€šæ€§  \n\nå»ºè®®åŠæ—¶æ¢å¤è¯¥å®ä¾‹æœåŠ¡ï¼Œä¿è¯é›†ç¾¤ API æœåŠ¡ç¨³å®šã€‚",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 30,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "up{job=\"apiserver\"} == 0",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 30s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubernetes API Server è¯·æ±‚å‹åŠ›å‘Šè­¦",
    "note": "é›†ç¾¤ {{ $labels.cluster }} ä¸­ Apiserver è¯·æ±‚å‹åŠ›å¼‚å¸¸\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ å½“å‰å‘Šè­¦å€¼ï¼ˆåŒ¹é…æ¡ä»¶ï¼‰ï¼š`{{ $value }}`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼š1å°æ—¶å’Œ5åˆ†é’Ÿçš„è¯·æ±‚å‹åŠ›ç‡å‡å¤§äº 0.144\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ API è¯·æ±‚å‹åŠ›æ¿€å¢ï¼Œå¯èƒ½è¶…å‡ºå®¹é”™é˜ˆå€¼  \nâœ“ æœåŠ¡ç¨³å®šæ€§ä¸‹é™ï¼Œå¯èƒ½å¯¼è‡´éƒ¨åˆ†è¯·æ±‚å¤±è´¥  \nâœ“ å»ºè®®æ£€æŸ¥ Apiserver çš„è®¿é—®æ¥æºã€QPS é™åˆ¶åŠè°ƒç”¨é¢‘ç‡  \n\nè¯·åŠæ—¶è¯„ä¼°è¯·æ±‚æ¨¡å¼ï¼Œå¹¶é‡‡å–é™æµæˆ–æ‰©å®¹æªæ–½ã€‚",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 30,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "sum by(cluster) (apiserver_request:burnrate1h) > 0.144 and sum by(cluster) (apiserver_request:burnrate5m) > 0.144",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 30s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubernetes API Server è¯·æ±‚å¤±è´¥ç‡å¼‚å¸¸",
    "note": "é›†ç¾¤ {{ $labels.cluster }} ä¸­ Apiserver è¯·æ±‚ç»ˆæ­¢æ¯”ä¾‹è¿‡é«˜\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ è¯·æ±‚ç»ˆæ­¢æ¯”ä¾‹ï¼š`{{ printf \"%.2f\" $value }}%` (> 20%)  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šæœ€è¿‘10åˆ†é’Ÿå†…è¯·æ±‚ç»ˆæ­¢æ¯”ä¾‹è¶…è¿‡ 20%  \n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ é«˜è¯·æ±‚ç»ˆæ­¢æ¯”ä¾‹å¯èƒ½å¯¼è‡´ API è¯·æ±‚é¢‘ç¹å¤±è´¥æˆ–ä¸­æ–­  \nâœ“ å¯èƒ½å½±å“é›†ç¾¤èµ„æºè°ƒåº¦å’Œæ­£å¸¸ä¸šåŠ¡è¯·æ±‚  \nâœ“ å¯èƒ½ç”± Apiserver è´Ÿè½½è¿‡é«˜ã€ç½‘ç»œæ•…éšœæˆ–é…ç½®å¼‚å¸¸å¼•èµ·  \nâœ“ å»ºè®®æ£€æŸ¥ Apiserver è´Ÿè½½ã€æ—¥å¿—åŠç½‘ç»œçŠ¶å†µ  \n\nè¯·å°½å¿«æ’æŸ¥é—®é¢˜ï¼Œä¿éšœ API Server ç¨³å®šè¿è¡Œã€‚",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 1,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "(\n  sum by(cluster) (rate(apiserver_request_terminations_total{job=\"apiserver\"}[10m]))  \n  / \n  (\n    sum by(cluster) (rate(apiserver_request_total{job=\"apiserver\"}[10m])) \n    + \n    sum by(cluster) (rate(apiserver_request_terminations_total{job=\"apiserver\"}[10m]))\n  )\n) * 100 > 20",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 15s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubernetes API Service å¥åº·çŠ¶æ€å¼‚å¸¸",
    "note": "APIService {{ $labels.name }} åœ¨å‘½åç©ºé—´ {{ $labels.namespace }} çš„ä¸å¯ç”¨æ¬¡æ•°å¼‚å¸¸\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ APIService åç§°ï¼š`{{ $labels.name }}`  \nâ–¸ å‘½åç©ºé—´ï¼š`{{ $labels.namespace }}`  \nâ–¸ é›†ç¾¤ï¼š`{{ $labels.cluster }}`  \nâ–¸ 10 åˆ†é’Ÿå†…ä¸å¯ç”¨æ¬¡æ•°ï¼š`{{ $value }}` æ¬¡  \nâ–¸ è§¦å‘æ¡ä»¶ï¼š10 åˆ†é’Ÿå†…ä¸å¯ç”¨æ¬¡æ•°è¶…è¿‡ 4 æ¬¡  \n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ APIService ä¸å¯ç”¨å¯èƒ½å¯¼è‡´é›†ç¾¤éƒ¨åˆ†åŠŸèƒ½å—é™  \nâœ“ å¯èƒ½å½±å“é›†ç¾¤å†…ç›¸å…³èµ„æºçš„æ­£å¸¸è°ƒåº¦å’Œç®¡ç†  \nâœ“ è¯·æ’æŸ¥ APIService çš„å¥åº·çŠ¶å†µåŠç½‘ç»œè¿é€šæ€§  \nâœ“ æ£€æŸ¥å¯¹åº”æœåŠ¡çš„æ—¥å¿—å’Œèµ„æºçŠ¶æ€  \n\nå»ºè®®åŠæ—¶å¤„ç†ï¼Œç¡®ä¿é›†ç¾¤ç¨³å®šè¿è¡Œã€‚",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 30,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "sum by(name, namespace, cluster)(increase(aggregator_unavailable_apiservice_total[10m])) > 4",
          "severity": 1,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 30s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubernetes API Service å¯ç”¨æ€§å¼‚å¸¸",
    "note": "APIService {{ $labels.name }} åœ¨å‘½åç©ºé—´ {{ $labels.namespace }} çš„å¯ç”¨ç‡ä½äº 85%\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ APIService åç§°ï¼š`{{ $labels.name }}`  \nâ–¸ å‘½åç©ºé—´ï¼š`{{ $labels.namespace }}`  \nâ–¸ æœ€è¿‘10åˆ†é’Ÿæœ€å¤§å¯ç”¨ç‡ï¼š`{{ printf \"%.2f\" ($value) }}%` (< 85%)  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šAPIService æœ€è¿‘10åˆ†é’Ÿæœ€å¤§å¯ç”¨ç‡ä½äº85%  \n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ APIService å¯ç”¨ç‡ä¸è¶³å¯èƒ½å¯¼è‡´éƒ¨åˆ†é›†ç¾¤åŠŸèƒ½å¼‚å¸¸  \nâœ“ å½±å“ API è¯·æ±‚çš„ç¨³å®šæ€§å’Œæ­£å¸¸è°ƒåº¦  \nâœ“ å¯èƒ½ç”±ç½‘ç»œé—®é¢˜ã€æœåŠ¡æ•…éšœæˆ–èµ„æºå‹åŠ›å¼•èµ·  \nâœ“ å»ºè®®æ£€æŸ¥å¯¹åº” APIService ç»„ä»¶çš„å¥åº·çŠ¶æ€å’Œæ—¥å¿—  \n\nè¯·å°½å¿«æ’æŸ¥å¹¶æ¢å¤ APIService çš„æ­£å¸¸æœåŠ¡ã€‚",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "(1 - max by(name, namespace, cluster)(avg_over_time(aggregator_unavailable_apiservice[10m]))) * 100 < 85",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubernetes DaemonSet çŠ¶æ€å¼‚å¸¸ä¸”é•¿æ—¶é—´æ— æ›´æ–°å‘Šè­¦",
    "note": "{{$labels.namespace}} å‘½åç©ºé—´ä¸­çš„ DaemonSet `{{$labels.daemonset}}` çŠ¶æ€å¼‚å¸¸ï¼Œä¸”æœ€è¿‘ 5 åˆ†é’Ÿå†…æ— æ›´æ–°è¡Œä¸º\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ DaemonSet åç§°ï¼š`{{$labels.daemonset}}`  \nâ–¸ å‘½åç©ºé—´ï¼š`{{$labels.namespace}}`  \nâ–¸ å½“å‰è°ƒåº¦æ•°ï¼š`{{$labels.kube_daemonset_status_current_number_scheduled}}`  \nâ–¸ æœŸæœ›è°ƒåº¦æ•°ï¼š`{{$labels.kube_daemonset_status_desired_number_scheduled}}`  \nâ–¸ å¯ç”¨å‰¯æœ¬æ•°ï¼š`{{$labels.kube_daemonset_status_number_available}}`  \nâ–¸ Misscheduled æ•°ï¼š`{{$labels.kube_daemonset_status_number_misscheduled}}`  \n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ DaemonSet æ— æ³•åœ¨æ‰€æœ‰èŠ‚ç‚¹æ­£å¸¸è¿è¡Œ  \nâœ“ æœ‰å¯èƒ½å­˜åœ¨èŠ‚ç‚¹çŠ¶æ€å¼‚å¸¸æˆ–èµ„æºä¸è¶³  \nâœ“ åº”ç”¨å¯èƒ½æ— æ³•æä¾›å®Œæ•´çš„æœåŠ¡æˆ–æ—¥å¿—é‡‡é›†å¼‚å¸¸  \nâœ“ ä¸” 5 åˆ†é’Ÿå†…æ— ä»»ä½•æ›´æ–°æ“ä½œï¼Œé—®é¢˜å¯èƒ½å·²å¡ä½  \n\nè¯·æ£€æŸ¥èŠ‚ç‚¹çŠ¶æ€ä¸ DaemonSet æ§åˆ¶å™¨æ—¥å¿—ï¼Œç¡®è®¤æ˜¯å¦ä¸ºèµ„æºä¸è¶³ã€èŠ‚ç‚¹å¼‚å¸¸æˆ–è°ƒåº¦å¤±è´¥å¯¼è‡´ã€‚",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "(\n  (\n    kube_daemonset_status_current_number_scheduled{job=\"kube-state-metrics\"}\n     !=\n    kube_daemonset_status_desired_number_scheduled{job=\"kube-state-metrics\"}\n  ) or (\n    kube_daemonset_status_number_misscheduled{job=\"kube-state-metrics\"}\n     !=\n    0\n  ) or (\n    kube_daemonset_status_updated_number_scheduled{job=\"kube-state-metrics\"}\n     !=\n    kube_daemonset_status_desired_number_scheduled{job=\"kube-state-metrics\"}\n  ) or (\n    kube_daemonset_status_number_available{job=\"kube-state-metrics\"}\n     !=\n    kube_daemonset_status_desired_number_scheduled{job=\"kube-state-metrics\"}\n  )\n) and (\n  changes(kube_daemonset_status_updated_number_scheduled{job=\"kube-state-metrics\"}[5m])\n    ==\n  0\n)",
          "severity": 3,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 1,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubernetes Deployment æ›´æ–°æœªå®Œæˆ",
    "note": "{{$labels.namespace}} / {{$labels.deployment}} Deployment æ›´æ–°æœªå®Œæˆ\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ å‘½åç©ºé—´ï¼š`{{$labels.namespace}}`  \nâ–¸ Deployment åç§°ï¼š`{{$labels.deployment}}`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šObservedGeneration ä¸ Metadata Generation ä¸ä¸€è‡´\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ Deployment æ›´æ–°å¯èƒ½å¡ä½ï¼Œåº”ç”¨æ— æ³•åŠæ—¶ä¸Šçº¿æ–°ç‰ˆæœ¬  \nâœ“ å¯èƒ½å­˜åœ¨æ»šåŠ¨æ›´æ–°å¤±è´¥æˆ–æ§åˆ¶å™¨å¼‚å¸¸  \nâœ“ å»ºè®®æ£€æŸ¥ Controller Manager æ—¥å¿—ä¸ Pod çŠ¶æ€\n\nè¯·å°½å¿«ç¡®è®¤ Deployment æ›´æ–°çŠ¶æ€ï¼Œç¡®ä¿ç³»ç»ŸåŠŸèƒ½ä¸å—å½±å“ã€‚",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 1,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "kube_deployment_status_observed_generation{job=\"kube-state-metrics\"}\n  !=\nkube_deployment_metadata_generation{job=\"kube-state-metrics\"}",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 15s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubernetes Pod çŠ¶æ€å¼‚å¸¸ï¼ˆPending/Unknownï¼‰",
    "note": "{{$labels.pod}} Pod çŠ¶æ€å¼‚å¸¸\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ å‘½åç©ºé—´ï¼š`{{$labels.namespace}}`  \nâ–¸ Pod åç§°ï¼š`{{$labels.pod}}`  \nâ–¸ å½“å‰çŠ¶æ€ï¼š`Pending` æˆ– `Unknown`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šPod çŠ¶æ€ä¸º Pending/Unknownï¼Œä¸”æŒç»­å­˜åœ¨\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ Pod å¯èƒ½å› è°ƒåº¦å¤±è´¥ã€èµ„æºä¸è¶³æˆ–èŠ‚ç‚¹å¼‚å¸¸è€Œæ— æ³•è¿è¡Œ  \nâœ“ Pending è¯´æ˜ Pod æœªè¢«æˆåŠŸè°ƒåº¦åˆ°èŠ‚ç‚¹  \nâœ“ Unknown å¯èƒ½ä¸º Kubelet å¤±è”æˆ– API Server çŠ¶æ€è·å–å¼‚å¸¸  \nâœ“ è‹¥æŒç»­å¼‚å¸¸ï¼Œåº”æ£€æŸ¥è°ƒåº¦ç­–ç•¥ã€èŠ‚ç‚¹çŠ¶æ€ã€ç½‘ç»œè¿æ¥ç­‰\n\nè¯·åŠæ—¶æ’æŸ¥è¯¥ Pod çš„çŠ¶æ€ä¸æ‰€å±æ§åˆ¶å™¨èµ„æºæƒ…å†µã€‚",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 300,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "sum by (namespace, pod, cluster) (\n  max by(namespace, pod, cluster) (\n    kube_pod_status_phase{job=\"kube-state-metrics\", phase=~\"Pending|Unknown\"}\n  ) * on(namespace, pod, cluster) group_left(owner_kind) topk by(namespace, pod, cluster) (\n    1, max by(namespace, pod, owner_kind, cluster) (kube_pod_owner{owner_kind!=\"Job\"})\n  )\n) > 0",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubernetes Pod é¢‘ç¹é‡å¯å‘Šè­¦",
    "note": "{{$labels.namespace}} / {{$labels.pod}} å®¹å™¨ {{$labels.container}} çŠ¶æ€å¼‚å¸¸\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ å‘½åç©ºé—´ï¼š`{{$labels.namespace}}`  \nâ–¸ Pod åç§°ï¼š`{{$labels.pod}}`  \nâ–¸ å®¹å™¨åç§°ï¼š`{{$labels.container}}`  \nâ–¸ å¼‚å¸¸çŠ¶æ€ï¼š`CrashLoopBackOff`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼š5 åˆ†é’Ÿå†…å®¹å™¨å¤„äº CrashLoopBackOff çŠ¶æ€æ¬¡æ•° â‰¥ 3\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ å®¹å™¨æŒç»­å´©æºƒï¼Œå¯èƒ½å¯¼è‡´æœåŠ¡æ— æ³•æ­£å¸¸å¯åŠ¨  \nâœ“ é—®é¢˜å¯èƒ½ç”±å¯åŠ¨å‘½ä»¤é”™è¯¯ã€é…ç½®å¼‚å¸¸ã€èµ„æºé™åˆ¶ç­‰å¼•èµ·  \nâœ“ è‹¥å®¹å™¨é¢‘ç¹é‡å¯ï¼Œå°†å¯¹é›†ç¾¤èµ„æºé€ æˆæµªè´¹å¹¶å½±å“æœåŠ¡å¯ç”¨æ€§\n\nè¯·å°½å¿«æŸ¥çœ‹å®¹å™¨æ—¥å¿— `kubectl logs {{$labels.pod}} -n {{$labels.namespace}} -c {{$labels.container}}` æ’æŸ¥æ ¹å› ã€‚",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "max_over_time(kube_pod_container_status_waiting_reason{reason=\"CrashLoopBackOff\", job=\"kube-state-metrics\"}[5m]) >= 3",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubernetes PVC å­˜å‚¨ç©ºé—´å³å°†è€—å°½",
    "note": "æŒä¹…å· PVC ç©ºé—´ä¸è¶³ï¼Œå¯èƒ½å½±å“æœåŠ¡æ­£å¸¸è¿è¡Œ\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ å‘½åç©ºé—´ï¼š`{{ $labels.namespace }}`  \nâ–¸ PVC åç§°ï¼š`{{ $labels.persistentvolumeclaim }}`  \nâ–¸ èŠ‚ç‚¹ï¼š`{{ $labels.node }}`  \nâ–¸ å½“å‰å¯ç”¨æ¯”ä¾‹ï¼š`{{ $value }}`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šå¯ç”¨ç©ºé—´å æ¯”ä½äº 3%ï¼Œä¸”å·ä¸ºå¯å†™å¹¶æœªè®¾ç½®å¿½ç•¥å‘Šè­¦æ ‡ç­¾\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ æŒä¹…å·å¯ç”¨ç©ºé—´å³å°†è€—å°½ï¼Œå†™å…¥æ“ä½œå¯èƒ½å¤±è´¥  \nâœ“ åº”ç”¨å¯èƒ½å› ä¸ºç£ç›˜ä¸è¶³å‡ºç°é”™è¯¯æˆ–å´©æºƒ  \nâœ“ è‹¥å·ä¸ºçŠ¶æ€ç»„ä»¶ï¼ˆå¦‚æ•°æ®åº“ï¼‰ï¼Œé£é™©æ›´å¤§  \n\nè¯·åŠæ—¶æ‰©å®¹ PVC æˆ–æ¸…ç†æ— æ•ˆæ•°æ®ï¼Œé¿å…æœåŠ¡å¼‚å¸¸ã€‚",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "(\n  kubelet_volume_stats_available_bytes{job=\"kubelet\"}\n    /\n  kubelet_volume_stats_capacity_bytes{job=\"kubelet\"}\n) < 0.03\nand\nkubelet_volume_stats_used_bytes{job=\"kubelet\"} > 0\nunless on(namespace, persistentvolumeclaim, cluster)\nkube_persistentvolumeclaim_access_mode{ access_mode=\"ReadOnlyMany\"} == 1\nunless on(namespace, persistentvolumeclaim, cluster)\nkube_persistentvolumeclaim_labels{label_excluded_from_alerts=\"true\"} == 1",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubernetes StatefulSet å‰¯æœ¬æœªå°±ç»ªä¸”æ›´æ–°å¡é¡¿",
    "note": "{{$labels.namespace}} / {{$labels.statefulset}} StatefulSet å‰¯æœ¬å¼‚å¸¸\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ å‘½åç©ºé—´ï¼š`{{$labels.namespace}}`  \nâ–¸ StatefulSet åç§°ï¼š`{{$labels.statefulset}}`  \nâ–¸ å½“å‰å°±ç»ªå‰¯æœ¬æ•°ï¼š`{{$value}}`ï¼ˆå°‘äºæœŸæœ›å€¼ï¼‰  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šå‰¯æœ¬æœªå…¨éƒ¨å°±ç»ªï¼Œä¸” 10 åˆ†é’Ÿå†…æ— æ›´æ–°å˜åŠ¨\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ StatefulSet ä¸­éƒ¨åˆ†å‰¯æœ¬æœªå‡†å¤‡å°±ç»ªï¼ŒæœåŠ¡å¯èƒ½éƒ¨åˆ†ä¸å¯ç”¨  \nâœ“ æ›´æ–°è¿‡ç¨‹å¯èƒ½å¼‚å¸¸ä¸­æ–­æˆ–é˜»å¡  \nâœ“ å»ºè®®æ£€æŸ¥ Pod çŠ¶æ€ã€èŠ‚ç‚¹èµ„æºä¸ StatefulSet æ»šåŠ¨ç­–ç•¥é…ç½®\n\nè¯·åŠæ—¶æ’æŸ¥ç›¸å…³ StatefulSet çš„ Pod çŠ¶æ€ä¸æ§åˆ¶å™¨æ—¥å¿—ã€‚",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "(\n  kube_statefulset_status_replicas_ready{job=\"kube-state-metrics\"}\n    !=\n  kube_statefulset_status_replicas{job=\"kube-state-metrics\"}\n) and (\n  changes(kube_statefulset_status_replicas_updated{job=\"kube-state-metrics\"}[10m])\n    ==\n  0\n)",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubernetes å®¹å™¨ CPU è¢«é™é€Ÿæ¯”ä¾‹è¿‡é«˜",
    "note": "å®¹å™¨ CPU è¢«é¢‘ç¹é™é€Ÿï¼Œå¯èƒ½å½±å“åº”ç”¨æ€§èƒ½\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ å‘½åç©ºé—´ï¼š`{{ $labels.namespace }}`  \nâ–¸ Pod åç§°ï¼š`{{ $labels.pod }}`  \nâ–¸ å®¹å™¨åç§°ï¼š`{{ $labels.container }}`  \nâ–¸ å½“å‰é™é€Ÿæ¯”ï¼š`{{ $value }}`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šå®¹å™¨ CPU è¢«é™é€Ÿæ¯”ä¾‹ > 65%ï¼ˆ5åˆ†é’Ÿå†…ï¼‰\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ å®¹å™¨è¯·æ±‚ CPU ä¸è¶³ï¼Œå®¹æ˜“è¢«é¢‘ç¹é™é€Ÿï¼Œå½±å“ä¸šåŠ¡å»¶è¿Ÿå’Œå“åº”  \nâœ“ èŠ‚ç‚¹ CPU å‹åŠ›è¿‡å¤§ï¼Œæˆ–å®¹å™¨è®¾ç½®çš„ CPU é™é¢ä¸åˆç†  \nâœ“ åº”ç”¨åœ¨çªå‘æ—¶æ— æ³•è·å–è¶³å¤Ÿèµ„æºï¼Œæ€§èƒ½ä¸‹é™æ˜æ˜¾\n\nå»ºè®®æ£€æŸ¥å®¹å™¨çš„ CPU request/limit è®¾ç½®ï¼Œè¯„ä¼°æ˜¯å¦éœ€è¦èµ„æºæ‰©å®¹æˆ–ä¼˜åŒ–åº”ç”¨çº¿ç¨‹/èµ„æºä½¿ç”¨ç­–ç•¥ã€‚",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "sum(increase(container_cpu_cfs_throttled_periods_total{container!=\"\", }[5m])) by (container, pod, namespace, cluster)\n  /\nsum(increase(container_cpu_cfs_periods_total{}[5m])) by (container, pod, namespace, cluster)\n  > ( 65 / 100 )",
          "severity": 3,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubernetes æ§åˆ¶å™¨ç»„ä»¶ç¦»çº¿",
    "note": "Kubernetes æ§åˆ¶å™¨ç®¡ç†å™¨ç»„ä»¶æœªè¿è¡Œæˆ–å¤±è”\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ ç»„ä»¶åç§°ï¼š`kube-controller-manager`  \nâ–¸ æ¢æµ‹æ–¹å¼ï¼šPrometheus `up` æŒ‡æ ‡ç¼ºå¤±æˆ–ä¸ä¸º 1  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šè¯¥ç»„ä»¶æ‰€æœ‰å®ä¾‹æœªä¸ŠæŠ¥æˆ–ä¸å¯ç”¨\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ æ§åˆ¶å™¨ç®¡ç†å™¨è´Ÿè´£æ ¸å¿ƒæ§åˆ¶å¾ªç¯ï¼ˆå¦‚å‰¯æœ¬æ•°æ§åˆ¶ã€èŠ‚ç‚¹ç®¡ç†ã€PV ç»‘å®šç­‰ï¼‰  \nâœ“ è‹¥ç»„ä»¶å¤±è”ï¼Œå¯èƒ½å¯¼è‡´èµ„æºæ— æ³•è‡ªåŠ¨è°ƒèŠ‚ã€æ— æ³•æ–°å»ºå‰¯æœ¬æˆ–é‡Šæ”¾èµ„æº  \nâœ“ å¸¸è§åŸå› åŒ…æ‹¬ç»„ä»¶ Crashã€Pod è¢«é©±é€ã€æœåŠ¡ç«¯å£æœªæš´éœ²ã€Prometheus æ‹‰å–å¤±è´¥\n\nè¯·æ£€æŸ¥ç»„ä»¶æ˜¯å¦æ­£å¸¸è¿è¡Œï¼š\n\n```bash\nkubectl get pods -n kube-system -l component=kube-controller-manager\n```",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 30,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "absent(up{job=\"kube-controller-manager\"} == 1)",
          "severity": 1,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 30s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubernetes èŠ‚ç‚¹ Pod æ•°æ¥è¿‘è°ƒåº¦ä¸Šé™å‘Šè­¦",
    "note": "{{$labels.node}} èŠ‚ç‚¹ Pod ä½¿ç”¨ç‡è¿‡é«˜\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ èŠ‚ç‚¹åç§°ï¼š`{{$labels.node}}`  \nâ–¸ å½“å‰ Pod ä½¿ç”¨ç‡ï¼š`{{$value}}`ï¼ˆæ•°å€¼èŒƒå›´ï¼š0~1 å¯¹åº” 0%~100%ï¼‰  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šèŠ‚ç‚¹ Pod ä½¿ç”¨ç‡å¤§äº 0.95(95%)\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ èŠ‚ç‚¹å³å°†è¾¾åˆ° Pod è°ƒåº¦ä¸Šé™ï¼Œå¯èƒ½å¯¼è‡´æ–° Pod æ— æ³•è°ƒåº¦  \nâœ“ å»ºè®®æ‰©å®¹èŠ‚ç‚¹æˆ–é‡æ–°è°ƒåº¦ Pod åˆ†å¸ƒï¼Œç¼“è§£è°ƒåº¦å‹åŠ›",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "count by(node, cluster) (\n  (kube_pod_status_phase{job=\"kube-state-metrics\",phase=\"Running\"} == 1) * on(instance,pod,namespace,cluster) group_left(node) topk by(instance,pod,namespace,cluster) (1, kube_pod_info{job=\"kube-state-metrics\"})\n)\n/\nmax by(node, cluster) (\n  kube_node_status_capacity{job=\"kube-state-metrics\",resource=\"pods\"} != 1\n) > 0.95",
          "severity": 3,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubernetes èŠ‚ç‚¹ä¸å¯è¾¾ï¼ˆUnreachableï¼‰å‘Šè­¦",
    "note": "Kubernetes èŠ‚ç‚¹å¤„äº Unreachable çŠ¶æ€ï¼ˆä¸å¯è¾¾ï¼‰\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ èŠ‚ç‚¹åç§°ï¼š`{{$labels.node}}`  \nâ–¸ Taint çŠ¶æ€ï¼š`node.kubernetes.io/unreachable:NoSchedule`  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šèŠ‚ç‚¹è¢«æ ‡è®°ä¸º unreachableï¼Œä¸”ä¸å±äºè®¡åˆ’æ€§ä¸‹çº¿åœºæ™¯\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ èŠ‚ç‚¹å¯èƒ½å·²ç»å®•æœºæˆ–ä¸æ§åˆ¶å¹³é¢å¤±å»è”ç³»  \nâœ“ Pod æ— æ³•è°ƒåº¦åˆ°è¯¥èŠ‚ç‚¹ï¼Œç°æœ‰ Pod å¯èƒ½å¡æ­»æˆ–ç­‰å¾…é©±é€  \nâœ“ å¯èƒ½ç”±äºç½‘ç»œå¼‚å¸¸ã€ç”µæºæ•…éšœã€Kubelet å´©æºƒç­‰é—®é¢˜å¼•èµ·\n\nè¯·ç«‹å³æ£€æŸ¥èŠ‚ç‚¹è¿æ¥çŠ¶å†µï¼Œå¹¶æ ¹æ®æƒ…å†µå†³å®šæ˜¯å¦é©±é€æˆ–æ¢å¤è¯¥èŠ‚ç‚¹ï¼š\nkubectl describe node {{$labels.node}}\nkubectl get pods -o wide --all-namespaces | grep {{$labels.node}}",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "(\n  kube_node_spec_taint{job=\"kube-state-metrics\", key=\"node.kubernetes.io/unreachable\", effect=\"NoSchedule\"}\n  unless ignoring(key,value)\n  kube_node_spec_taint{\n    job=\"kube-state-metrics\",\n    key=~\"ToBeDeletedByClusterAutoscaler|cloud.google.com/impending-node-termination|aws-node-termination-handler/spot-itn\"\n  }\n) == 1",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubernetes èŠ‚ç‚¹çŠ¶æ€é¢‘ç¹å˜æ›´",
    "note": "{{$labels.node}} èŠ‚ç‚¹ Ready çŠ¶æ€é¢‘ç¹æ³¢åŠ¨\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ èŠ‚ç‚¹åç§°ï¼š`{{$labels.node}}`  \nâ–¸ çŠ¶æ€å˜åŠ¨æ¬¡æ•°ï¼š`{{$value}}` æ¬¡ï¼ˆè¿‘ 15 åˆ†é’Ÿï¼‰  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šçŠ¶æ€å˜åŠ¨æ¬¡æ•°å¤§äº 2 æ¬¡\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ èŠ‚ç‚¹çŠ¶æ€ä¸ç¨³å®šï¼Œå¯èƒ½é¢‘ç¹æ‰çº¿åˆæ¢å¤  \nâœ“ Pod å¯èƒ½ä¸æ–­è¿ç§»æˆ–é‡å»ºï¼Œå½±å“ä¸šåŠ¡ç¨³å®šæ€§  \nâœ“ ç½‘ç»œä¸­æ–­ã€å†…æ ¸å®•æœºã€Kubelet å´©æºƒç­‰å¯èƒ½åŸå›   \n\nå»ºè®®ç«‹å³æ£€æŸ¥è¯¥èŠ‚ç‚¹ç³»ç»Ÿæ—¥å¿—ã€Kubelet çŠ¶æ€ã€ç½‘ç»œè¿é€šæ€§ç­‰ï¼š\nkubectl describe node {{$labels.node}}\njournalctl -u kubelet\nping <apiserver> -I <node-ip>",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 60,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "sum(changes(kube_node_status_condition{status=\"true\", condition=\"Ready\"}[15m])) by (node, cluster) > 2",
          "severity": 3,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 60s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubernetes è°ƒåº¦å™¨ç»„ä»¶æ¢æµ‹å¤±è´¥",
    "note": "Kubernetes è°ƒåº¦å™¨ç»„ä»¶ä¸å¯ç”¨æˆ–æ— æ•°æ®ä¸ŠæŠ¥\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ ç»„ä»¶åç§°ï¼š`kube-scheduler`  \nâ–¸ æ¢æµ‹æ–¹å¼ï¼šPrometheus `up == 1` çŠ¶æ€ç¼ºå¤±  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šæ‰€æœ‰ kube-scheduler å®ä¾‹æœªä¸ŠæŠ¥ç›‘æ§æ•°æ®æˆ–çŠ¶æ€å¼‚å¸¸\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ kube-scheduler æ˜¯ Kubernetes çš„æ ¸å¿ƒè°ƒåº¦ç»„ä»¶ï¼Œè´Ÿè´£å°† Pod åˆ†é…åˆ°åˆé€‚çš„èŠ‚ç‚¹  \nâœ“ è‹¥è°ƒåº¦å™¨ç¦»çº¿ï¼Œå°†å¯¼è‡´æ–°å»º Pod æ— æ³•åˆ†é…èŠ‚ç‚¹ï¼Œå½±å“åº”ç”¨æ­£å¸¸éƒ¨ç½²  \nâœ“ å¯èƒ½åŸå› åŒ…æ‹¬ç»„ä»¶ Crashã€Pod è¢«é©±é€ã€ç½‘ç»œå¼‚å¸¸æˆ–ç›‘æ§ç«¯å£æœªæš´éœ²\n\nè¯·ç«‹å³æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ£€æŸ¥ç»„ä»¶çŠ¶æ€ï¼š\nkubectl get pods -n kube-system -l component=kube-scheduler",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 30,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "absent(up{job=\"kube-scheduler\"} == 1)",
          "severity": 1,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 30s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Kubernetes é›†ç¾¤èŠ‚ç‚¹çŠ¶æ€å¼‚å¸¸ï¼ˆNotReadyï¼‰",
    "note": "Kubernetes èŠ‚ç‚¹æœªå°±ç»ªï¼ˆNotReadyï¼‰\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**  \nâ–¸ èŠ‚ç‚¹åç§°ï¼š`{{$labels.node}}`  \nâ–¸ å½“å‰çŠ¶æ€ï¼šNotReady  \nâ–¸ è§¦å‘æ¡ä»¶ï¼škube_node_status_condition == 0ï¼ˆReady çŠ¶æ€ä¸º falseï¼‰\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ èŠ‚ç‚¹å¤„äº NotReady çŠ¶æ€ï¼Œè°ƒåº¦å™¨å°†ä¸å†åˆ†é… Pod åˆ°è¯¥èŠ‚ç‚¹  \nâœ“ å·²è¿è¡Œçš„ Pod å¯èƒ½ä¼šé©±é€æˆ–è¢«è¿ç§»  \nâœ“ åŸå› å¯èƒ½åŒ…æ‹¬ï¼šKubelet å®•æœºã€ç½‘ç»œå¼‚å¸¸ã€ç£ç›˜æ»¡ã€å¿ƒè·³è¶…æ—¶ç­‰\n\nå»ºè®®å°½å¿«é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ’æŸ¥èŠ‚ç‚¹çŠ¶æ€ï¼š\nkubectl describe node {{$labels.node}}",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 30,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "kube_node_status_condition{job=\"kube-state-metrics\", condition=\"Ready\", status=\"true\"} == 0",
          "severity": 1,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "App=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 0,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 30s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  },
  {
    "cate": "prometheus",
    "datasource_queries": [
      {
        "match_type": 0,
        "op": "in",
        "values": [
          1
        ]
      }
    ],
    "name": "Podå†…å­˜ä½¿ç”¨è¿‡é«˜",
    "note": "å®¹å™¨ {{$labels.container}} å†…å­˜ä½¿ç”¨è¿‡é«˜\n\n**ğŸ“Œ æ£€æµ‹æŒ‡æ ‡ä¿¡æ¯**\nâ–¸ å‘½åç©ºé—´ï¼š`{{$labels.namespace}}`  \nâ–¸ èŠ‚ç‚¹ï¼š`{{$labels.node}}`  \nâ–¸ Pod åç§°ï¼š`{{$labels.pod}}`  \nâ–¸ å®¹å™¨åç§°ï¼š`{{$labels.container}}`  \nâ–¸ å½“å‰å†…å­˜ä½¿ç”¨é‡ï¼š{{ printf \"%.2f\" $value }} GB  \nâ–¸ è§¦å‘æ¡ä»¶ï¼šå†…å­˜ä½¿ç”¨è¶…è¿‡ 16 GB\n\n**ğŸ“ å½±å“åˆ†æ**  \nâœ“ å®¹å™¨å†…å­˜å ç”¨è¿‡é«˜ï¼Œå¯èƒ½å¯¼è‡´èŠ‚ç‚¹å†…å­˜å‹åŠ›å¢å¤§  \nâœ“ é«˜å†…å­˜æ¶ˆè€—å¯èƒ½å¼•å‘å®¹å™¨é‡å¯æˆ– OOM Kill  \nâœ“ éœ€æ£€æŸ¥åº”ç”¨å†…å­˜æ³„æ¼æˆ–å¼‚å¸¸å†…å­˜å¢é•¿  \n\nè¯·åŠæ—¶åˆ†æå®¹å™¨å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œä¼˜åŒ–èµ„æºé…ç½®æˆ–æ’æŸ¥å†…å­˜æ³„æ¼",
    "prod": "metric",
    "delay": 0,
    "prom_for_duration": 1,
    "rule_config": {
      "queries": [
        {
          "prom_ql": "max (container_memory_working_set_bytes{container !=\"\",container!=\"POD\"}) by (container, pod,node,namespace) / 1073741824 > 16",
          "severity": 2,
          "unit": "none"
        }
      ]
    },
    "event_relabel_config": null,
    "prom_eval_interval": 15,
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "append_tags": [
      "APP=Kubernetes"
    ],
    "annotations": {},
    "uuid": 0,
    "cur_event_count": 1,
    "update_by_nickname": "è¶…ç®¡",
    "cron_pattern": "@every 15s",
    "notify_rule_ids": [
      1
    ],
    "notify_version": 1
  }
]