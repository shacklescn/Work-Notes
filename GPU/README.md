# FQA
## 1。执行nvidia-smi时 响应很慢大概5-10s才有响应
### 延迟根因： H200 卡多卡并行初始化耗时
你执行 nvidia-smi 时，系统需要：
- 枚举 8 张 H200；
- 读取每张卡的 BAR 空间、温度、功耗、ECC、时钟等；
- 与每张卡建立 NVML 会话；
- 初始化 UVM（统一虚拟内存）上下文；
- H200 单卡显存高达 140GB，初始化时间长是正常现象。
- 多卡并行时，nvidia-smi 会串行初始化每张卡，导致总耗时显著增加。

### 建议优化方案
#### 1.启用持久化模式	避免每次重新初始化 GPU，显著减少延迟	
```shell
sudo nvidia-smi -pm 1
```
执行后，首次仍会慢，但后续查询将显著加快。

nvidia-smi -pm 1 开启了“持久化模式”（Persistence Mode），让 NVIDIA 驱动常驻内存，避免每次查询时重复初始化 GPU，从而大幅缩短 nvidia-smi 响应时间。

类比理解

未开启持久化模式：每次用打印机，都要重新开机、自检、连接，耗时。

开启持久化模式：打印机一直开机待机，直接打印，秒响应。
#### 2. 验证持久化模式是否生效
```shell
nvidia-smi -q | grep "Persistence Mode"
```